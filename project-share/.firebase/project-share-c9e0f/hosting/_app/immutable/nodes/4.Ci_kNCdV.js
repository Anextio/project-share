import{s as be,x as Re,e as H,a as P,t as j,l as W,c as O,b as q,g as V,d as J,f as _,r as M,i as b,h as U,j as K,A as Ee,u as Z,v as x,o as ke,m as X,k as De,q as Ie,n as ne}from"../chunks/scheduler.Cwazaqfz.js";import{S as we,i as ye,c as I,b as S,m as N,t as m,a as v,d as B,g as z,e as F,f as ee}from"../chunks/index.D0VKxQGj.js";import{e as le}from"../chunks/each.D6YF6ztN.js";import{p as Se}from"../chunks/stores.dV9NvrlY.js";import{u as oe,c as Ne,d as Be,e as Ae}from"../chunks/discussionsApi.CMBYx0O2.js";import{B as Q}from"../chunks/Hero.svelte_svelte_type_style_lang.BqHQ8Oh_.js";import{I as te}from"../chunks/Input.Xqs69k3Z.js";import{C as se}from"../chunks/Card._3FSYCGU.js";import{R as re,C as ie}from"../chunks/Row.CaZR2ylp.js";function ue(i,e,l){const t=i.slice();return t[14]=e[l],t}function Pe(i){var c;let e,l=i[0].content+"",t,n,f,u,o,r=i[0].author===((c=i[1])==null?void 0:c.displayName)&&ae(i),s=i[0].edited&&ce();return{c(){e=H("p"),t=j(l),n=P(),r&&r.c(),f=P(),s&&s.c(),u=W()},l(a){e=O(a,"P",{});var $=q(e);t=J($,l),$.forEach(_),n=V(a),r&&r.l(a),f=V(a),s&&s.l(a),u=W()},m(a,$){b(a,e,$),U(e,t),b(a,n,$),r&&r.m(a,$),b(a,f,$),s&&s.m(a,$),b(a,u,$),o=!0},p(a,$){var p;(!o||$&1)&&l!==(l=a[0].content+"")&&K(t,l),a[0].author===((p=a[1])==null?void 0:p.displayName)?r?(r.p(a,$),$&3&&m(r,1)):(r=ae(a),r.c(),m(r,1),r.m(f.parentNode,f)):r&&(z(),v(r,1,1,()=>{r=null}),F()),a[0].edited?s||(s=ce(),s.c(),s.m(u.parentNode,u)):s&&(s.d(1),s=null)},i(a){o||(m(r),o=!0)},o(a){v(r),o=!1},d(a){a&&(_(e),_(n),_(f),_(u)),r&&r.d(a),s&&s.d(a)}}}function Ve(i){let e,l,t,n,f;function u(r){i[10](r)}let o={type:"textarea",placeholder:"Edit reply"};return i[5]!==void 0&&(o.value=i[5]),e=new te({props:o}),Z.push(()=>ee(e,"value",u)),n=new Q({props:{$$slots:{default:[He]},$$scope:{ctx:i}}}),n.$on("click",i[9]),{c(){I(e.$$.fragment),t=P(),I(n.$$.fragment)},l(r){S(e.$$.fragment,r),t=V(r),S(n.$$.fragment,r)},m(r,s){N(e,r,s),b(r,t,s),N(n,r,s),f=!0},p(r,s){const c={};!l&&s&32&&(l=!0,c.value=r[5],x(()=>l=!1)),e.$set(c);const a={};s&131072&&(a.$$scope={dirty:s,ctx:r}),n.$set(a)},i(r){f||(m(e.$$.fragment,r),m(n.$$.fragment,r),f=!0)},o(r){v(e.$$.fragment,r),v(n.$$.fragment,r),f=!1},d(r){r&&_(t),B(e,r),B(n,r)}}}function ae(i){let e,l;return e=new Q({props:{$$slots:{default:[Ue]},$$scope:{ctx:i}}}),e.$on("click",i[8]),{c(){I(e.$$.fragment)},l(t){S(e.$$.fragment,t)},m(t,n){N(e,t,n),l=!0},p(t,n){const f={};n&131072&&(f.$$scope={dirty:n,ctx:t}),e.$set(f)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){v(e.$$.fragment,t),l=!1},d(t){B(e,t)}}}function Ue(i){let e;return{c(){e=j("Edit")},l(l){e=J(l,"Edit")},m(l,t){b(l,e,t)},d(l){l&&_(e)}}}function ce(i){let e,l="(edited)";return{c(){e=H("p"),e.textContent=l,this.h()},l(t){e=O(t,"P",{class:!0,"data-svelte-h":!0}),X(e)!=="svelte-7e5l90"&&(e.textContent=l),this.h()},h(){M(e,"class","edited svelte-wifswk")},m(t,n){b(t,e,n)},d(t){t&&_(e)}}}function He(i){let e;return{c(){e=j("Save")},l(l){e=J(l,"Save")},m(l,t){b(l,e,t)},d(l){l&&_(e)}}}function Oe(i){let e;return{c(){e=j("Reply")},l(l){e=J(l,"Reply")},m(l,t){b(l,e,t)},d(l){l&&_(e)}}}function pe(i){let e,l,t,n,f,u;function o(s){i[11](s)}let r={type:"textarea",placeholder:"Add a reply..."};return i[3]!==void 0&&(r.value=i[3]),l=new te({props:r}),Z.push(()=>ee(l,"value",o)),f=new Q({props:{$$slots:{default:[Te]},$$scope:{ctx:i}}}),f.$on("click",i[7]),{c(){e=H("div"),I(l.$$.fragment),n=P(),I(f.$$.fragment),this.h()},l(s){e=O(s,"DIV",{class:!0});var c=q(e);S(l.$$.fragment,c),n=V(c),S(f.$$.fragment,c),c.forEach(_),this.h()},h(){M(e,"class","reply-input svelte-wifswk")},m(s,c){b(s,e,c),N(l,e,null),U(e,n),N(f,e,null),u=!0},p(s,c){const a={};!t&&c&8&&(t=!0,a.value=s[3],x(()=>t=!1)),l.$set(a);const $={};c&131072&&($.$$scope={dirty:c,ctx:s}),f.$set($)},i(s){u||(m(l.$$.fragment,s),m(f.$$.fragment,s),u=!0)},o(s){v(l.$$.fragment,s),v(f.$$.fragment,s),u=!1},d(s){s&&_(e),B(l),B(f)}}}function Te(i){let e;return{c(){e=j("Submit")},l(l){e=J(l,"Submit")},m(l,t){b(l,e,t)},d(l){l&&_(e)}}}function $e(i){let e,l,t=le(i[0].replies),n=[];for(let u=0;u<t.length;u+=1)n[u]=_e(ue(i,t,u));const f=u=>v(n[u],1,1,()=>{n[u]=null});return{c(){e=H("div");for(let u=0;u<n.length;u+=1)n[u].c();this.h()},l(u){e=O(u,"DIV",{class:!0});var o=q(e);for(let r=0;r<n.length;r+=1)n[r].l(o);o.forEach(_),this.h()},h(){M(e,"class","nested-replies svelte-wifswk")},m(u,o){b(u,e,o);for(let r=0;r<n.length;r+=1)n[r]&&n[r].m(e,null);l=!0},p(u,o){if(o&3){t=le(u[0].replies);let r;for(r=0;r<t.length;r+=1){const s=ue(u,t,r);n[r]?(n[r].p(s,o),m(n[r],1)):(n[r]=_e(s),n[r].c(),m(n[r],1),n[r].m(e,null))}for(z(),r=t.length;r<n.length;r+=1)f(r);F()}},i(u){if(!l){for(let o=0;o<t.length;o+=1)m(n[o]);l=!0}},o(u){n=n.filter(Boolean);for(let o=0;o<n.length;o+=1)v(n[o]);l=!1},d(u){u&&_(e),ke(n,u)}}}function _e(i){let e,l;return e=new Ce({props:{reply:i[14],user:i[1]}}),e.$on("replyUpdated",i[12]),{c(){I(e.$$.fragment)},l(t){S(e.$$.fragment,t)},m(t,n){N(e,t,n),l=!0},p(t,n){const f={};n&1&&(f.reply=t[14]),n&2&&(f.user=t[1]),e.$set(f)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){v(e.$$.fragment,t),l=!1},d(t){B(e,t)}}}function qe(i){let e,l,t,n,f,u,o=i[0].author+"",r,s,c,a=i[0].createdAt+"",$,p,C,d,w,k,L,R;const A=[Ve,Pe],T=[];function y(h,D){return h[4]?0:1}l=y(i),t=T[l]=A[l](i),d=new Q({props:{$$slots:{default:[Oe]},$$scope:{ctx:i}}}),d.$on("click",i[6]);let g=i[2]&&pe(i),E=i[0].replies&&i[0].replies.length>0&&$e(i);return{c(){e=H("div"),t.c(),n=P(),f=H("p"),u=j("By: "),r=j(o),s=P(),c=H("p"),$=j(a),p=P(),C=H("div"),I(d.$$.fragment),w=P(),g&&g.c(),k=P(),E&&E.c(),L=W(),this.h()},l(h){e=O(h,"DIV",{class:!0});var D=q(e);t.l(D),n=V(D),f=O(D,"P",{class:!0});var G=q(f);u=J(G,"By: "),r=J(G,o),G.forEach(_),s=V(D),c=O(D,"P",{class:!0});var Y=q(c);$=J(Y,a),Y.forEach(_),D.forEach(_),p=V(h),C=O(h,"DIV",{class:!0});var fe=q(C);S(d.$$.fragment,fe),fe.forEach(_),w=V(h),g&&g.l(h),k=V(h),E&&E.l(h),L=W(),this.h()},h(){M(f,"class","author svelte-wifswk"),M(c,"class","date svelte-wifswk"),M(e,"class","reply-content svelte-wifswk"),M(C,"class","reply-actions svelte-wifswk")},m(h,D){b(h,e,D),T[l].m(e,null),U(e,n),U(e,f),U(f,u),U(f,r),U(e,s),U(e,c),U(c,$),b(h,p,D),b(h,C,D),N(d,C,null),b(h,w,D),g&&g.m(h,D),b(h,k,D),E&&E.m(h,D),b(h,L,D),R=!0},p(h,D){let G=l;l=y(h),l===G?T[l].p(h,D):(z(),v(T[G],1,1,()=>{T[G]=null}),F(),t=T[l],t?t.p(h,D):(t=T[l]=A[l](h),t.c()),m(t,1),t.m(e,n)),(!R||D&1)&&o!==(o=h[0].author+"")&&K(r,o),(!R||D&1)&&a!==(a=h[0].createdAt+"")&&K($,a);const Y={};D&131072&&(Y.$$scope={dirty:D,ctx:h}),d.$set(Y),h[2]?g?(g.p(h,D),D&4&&m(g,1)):(g=pe(h),g.c(),m(g,1),g.m(k.parentNode,k)):g&&(z(),v(g,1,1,()=>{g=null}),F()),h[0].replies&&h[0].replies.length>0?E?(E.p(h,D),D&1&&m(E,1)):(E=$e(h),E.c(),m(E,1),E.m(L.parentNode,L)):E&&(z(),v(E,1,1,()=>{E=null}),F())},i(h){R||(m(t),m(d.$$.fragment,h),m(g),m(E),R=!0)},o(h){v(t),v(d.$$.fragment,h),v(g),v(E),R=!1},d(h){h&&(_(e),_(p),_(C),_(w),_(k),_(L)),T[l].d(),B(d),g&&g.d(h),E&&E.d(h)}}}function je(i){let e,l;return e=new se({props:{class:"reply-card",$$slots:{default:[qe]},$$scope:{ctx:i}}}),{c(){I(e.$$.fragment)},l(t){S(e.$$.fragment,t)},m(t,n){N(e,t,n),l=!0},p(t,[n]){const f={};n&131135&&(f.$$scope={dirty:n,ctx:t}),e.$set(f)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){v(e.$$.fragment,t),l=!1},d(t){B(e,t)}}}function Je(i,e,l){let{reply:t}=e,{user:n}=e,f=!1,u="",o=!1,r="";const s=Re();function c(){l(2,f=!f)}async function a(){if(u.trim()!==""){const k={id:Date.now().toString(),content:u,author:"Current User",createdAt:new Date().toISOString(),replies:[]};await oe(t.id,{replies:[...t.replies,k]}),s("replyUpdated",{replyId:t.id,updatedReply:{replies:[...t.replies,k]}}),l(3,u=""),l(2,f=!1)}}function $(){l(4,o=!0),l(5,r=t.content)}async function p(){await oe(t.id,{content:r,edited:!0}),s("replyUpdated",{replyId:t.id,updatedReply:{content:r,edited:!0}}),l(4,o=!1)}function C(k){r=k,l(5,r)}function d(k){u=k,l(3,u)}function w(k){Ee.call(this,i,k)}return i.$$set=k=>{"reply"in k&&l(0,t=k.reply),"user"in k&&l(1,n=k.user)},[t,n,f,u,o,r,c,a,$,p,C,d,w]}class Ce extends we{constructor(e){super(),ye(this,e,Je,je,be,{reply:0,user:1})}}function de(i,e,l){const t=i.slice();return t[16]=e[l],t}function Le(i){let e,l="Loading discussion...";return{c(){e=H("p"),e.textContent=l},l(t){e=O(t,"P",{"data-svelte-h":!0}),X(e)!=="svelte-1nfi4na"&&(e.textContent=l)},m(t,n){b(t,e,n)},p:ne,i:ne,o:ne,d(t){t&&_(e)}}}function Me(i){let e,l,t,n,f;e=new re({props:{$$slots:{default:[Xe]},$$scope:{ctx:i}}});let u=i[0].replies&&he(i);return n=new re({props:{$$slots:{default:[lt]},$$scope:{ctx:i}}}),{c(){I(e.$$.fragment),l=P(),u&&u.c(),t=P(),I(n.$$.fragment)},l(o){S(e.$$.fragment,o),l=V(o),u&&u.l(o),t=V(o),S(n.$$.fragment,o)},m(o,r){N(e,o,r),b(o,l,r),u&&u.m(o,r),b(o,t,r),N(n,o,r),f=!0},p(o,r){const s={};r&524349&&(s.$$scope={dirty:r,ctx:o}),e.$set(s),o[0].replies?u?(u.p(o,r),r&1&&m(u,1)):(u=he(o),u.c(),m(u,1),u.m(t.parentNode,t)):u&&(z(),v(u,1,1,()=>{u=null}),F());const c={};r&524290&&(c.$$scope={dirty:r,ctx:o}),n.$set(c)},i(o){f||(m(e.$$.fragment,o),m(u),m(n.$$.fragment,o),f=!0)},o(o){v(e.$$.fragment,o),v(u),v(n.$$.fragment,o),f=!1},d(o){o&&(_(l),_(t)),B(e,o),u&&u.d(o),B(n,o)}}}function ze(i){var C;let e,l=i[0].title+"",t,n,f,u=i[0].description+"",o,r,s,c,a,$=i[0].startedBy===((C=i[2])==null?void 0:C.displayName)&&me(i),p=i[0].edited&&ge();return{c(){e=H("h4"),t=j(l),n=P(),f=H("p"),o=j(u),r=P(),$&&$.c(),s=P(),p&&p.c(),c=W()},l(d){e=O(d,"H4",{});var w=q(e);t=J(w,l),w.forEach(_),n=V(d),f=O(d,"P",{});var k=q(f);o=J(k,u),k.forEach(_),r=V(d),$&&$.l(d),s=V(d),p&&p.l(d),c=W()},m(d,w){b(d,e,w),U(e,t),b(d,n,w),b(d,f,w),U(f,o),b(d,r,w),$&&$.m(d,w),b(d,s,w),p&&p.m(d,w),b(d,c,w),a=!0},p(d,w){var k;(!a||w&1)&&l!==(l=d[0].title+"")&&K(t,l),(!a||w&1)&&u!==(u=d[0].description+"")&&K(o,u),d[0].startedBy===((k=d[2])==null?void 0:k.displayName)?$?($.p(d,w),w&5&&m($,1)):($=me(d),$.c(),m($,1),$.m(s.parentNode,s)):$&&(z(),v($,1,1,()=>{$=null}),F()),d[0].edited?p||(p=ge(),p.c(),p.m(c.parentNode,c)):p&&(p.d(1),p=null)},i(d){a||(m($),a=!0)},o(d){v($),a=!1},d(d){d&&(_(e),_(n),_(f),_(r),_(s),_(c)),$&&$.d(d),p&&p.d(d)}}}function Fe(i){let e,l,t,n,f,u,o,r;function s(p){i[10](p)}let c={placeholder:"Title"};i[4]!==void 0&&(c.value=i[4]),e=new te({props:c}),Z.push(()=>ee(e,"value",s));function a(p){i[11](p)}let $={type:"textarea",placeholder:"Description"};return i[5]!==void 0&&($.value=i[5]),n=new te({props:$}),Z.push(()=>ee(n,"value",a)),o=new Q({props:{$$slots:{default:[Ke]},$$scope:{ctx:i}}}),o.$on("click",i[9]),{c(){I(e.$$.fragment),t=P(),I(n.$$.fragment),u=P(),I(o.$$.fragment)},l(p){S(e.$$.fragment,p),t=V(p),S(n.$$.fragment,p),u=V(p),S(o.$$.fragment,p)},m(p,C){N(e,p,C),b(p,t,C),N(n,p,C),b(p,u,C),N(o,p,C),r=!0},p(p,C){const d={};!l&&C&16&&(l=!0,d.value=p[4],x(()=>l=!1)),e.$set(d);const w={};!f&&C&32&&(f=!0,w.value=p[5],x(()=>f=!1)),n.$set(w);const k={};C&524288&&(k.$$scope={dirty:C,ctx:p}),o.$set(k)},i(p){r||(m(e.$$.fragment,p),m(n.$$.fragment,p),m(o.$$.fragment,p),r=!0)},o(p){v(e.$$.fragment,p),v(n.$$.fragment,p),v(o.$$.fragment,p),r=!1},d(p){p&&(_(t),_(u)),B(e,p),B(n,p),B(o,p)}}}function me(i){let e,l;return e=new Q({props:{$$slots:{default:[Ge]},$$scope:{ctx:i}}}),e.$on("click",i[8]),{c(){I(e.$$.fragment)},l(t){S(e.$$.fragment,t)},m(t,n){N(e,t,n),l=!0},p(t,n){const f={};n&524288&&(f.$$scope={dirty:n,ctx:t}),e.$set(f)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){v(e.$$.fragment,t),l=!1},d(t){B(e,t)}}}function Ge(i){let e;return{c(){e=j("Edit")},l(l){e=J(l,"Edit")},m(l,t){b(l,e,t)},d(l){l&&_(e)}}}function ge(i){let e,l="(edited)";return{c(){e=H("p"),e.textContent=l,this.h()},l(t){e=O(t,"P",{class:!0,"data-svelte-h":!0}),X(e)!=="svelte-7e5l90"&&(e.textContent=l),this.h()},h(){M(e,"class","edited svelte-1r8s2ye")},m(t,n){b(t,e,n)},d(t){t&&_(e)}}}function Ke(i){let e;return{c(){e=j("Save")},l(l){e=J(l,"Save")},m(l,t){b(l,e,t)},d(l){l&&_(e)}}}function Qe(i){let e,l,t,n,f,u="Started by",o,r,s=i[0].startedBy+"",c,a,$,p="Created on",C,d,w=i[0].dateTime+"",k,L;const R=[Fe,ze],A=[];function T(y,g){return y[3]?0:1}return e=T(i),l=A[e]=R[e](i),{c(){l.c(),t=P(),n=H("div"),f=H("h3"),f.textContent=u,o=P(),r=H("p"),c=j(s),a=P(),$=H("h3"),$.textContent=p,C=P(),d=H("p"),k=j(w),this.h()},l(y){l.l(y),t=V(y),n=O(y,"DIV",{});var g=q(n);f=O(g,"H3",{"data-svelte-h":!0}),X(f)!=="svelte-15v89a2"&&(f.textContent=u),o=V(g),r=O(g,"P",{class:!0});var E=q(r);c=J(E,s),E.forEach(_),a=V(g),$=O(g,"H3",{"data-svelte-h":!0}),X($)!=="svelte-1q4l8ch"&&($.textContent=p),C=V(g),d=O(g,"P",{class:!0});var h=q(d);k=J(h,w),h.forEach(_),g.forEach(_),this.h()},h(){M(r,"class","author svelte-1r8s2ye"),M(d,"class","date svelte-1r8s2ye")},m(y,g){A[e].m(y,g),b(y,t,g),b(y,n,g),U(n,f),U(n,o),U(n,r),U(r,c),U(n,a),U(n,$),U(n,C),U(n,d),U(d,k),L=!0},p(y,g){let E=e;e=T(y),e===E?A[e].p(y,g):(z(),v(A[E],1,1,()=>{A[E]=null}),F(),l=A[e],l?l.p(y,g):(l=A[e]=R[e](y),l.c()),m(l,1),l.m(t.parentNode,t)),(!L||g&1)&&s!==(s=y[0].startedBy+"")&&K(c,s),(!L||g&1)&&w!==(w=y[0].dateTime+"")&&K(k,w)},i(y){L||(m(l),L=!0)},o(y){v(l),L=!1},d(y){y&&(_(t),_(n)),A[e].d(y)}}}function We(i){let e,l;return e=new se({props:{$$slots:{default:[Qe]},$$scope:{ctx:i}}}),{c(){I(e.$$.fragment)},l(t){S(e.$$.fragment,t)},m(t,n){N(e,t,n),l=!0},p(t,n){const f={};n&524349&&(f.$$scope={dirty:n,ctx:t}),e.$set(f)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){v(e.$$.fragment,t),l=!1},d(t){B(e,t)}}}function Xe(i){let e,l;return e=new ie({props:{fill:!0,$$slots:{default:[We]},$$scope:{ctx:i}}}),{c(){I(e.$$.fragment)},l(t){S(e.$$.fragment,t)},m(t,n){N(e,t,n),l=!0},p(t,n){const f={};n&524349&&(f.$$scope={dirty:n,ctx:t}),e.$set(f)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){v(e.$$.fragment,t),l=!1},d(t){B(e,t)}}}function he(i){let e,l;return e=new re({props:{$$slots:{default:[Ze]},$$scope:{ctx:i}}}),{c(){I(e.$$.fragment)},l(t){S(e.$$.fragment,t)},m(t,n){N(e,t,n),l=!0},p(t,n){const f={};n&524293&&(f.$$scope={dirty:n,ctx:t}),e.$set(f)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){v(e.$$.fragment,t),l=!1},d(t){B(e,t)}}}function ve(i){let e,l;return e=new Ce({props:{reply:i[16],user:i[2]}}),e.$on("replyUpdated",i[7]),{c(){I(e.$$.fragment)},l(t){S(e.$$.fragment,t)},m(t,n){N(e,t,n),l=!0},p(t,n){const f={};n&1&&(f.reply=t[16]),n&4&&(f.user=t[2]),e.$set(f)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){v(e.$$.fragment,t),l=!1},d(t){B(e,t)}}}function Ye(i){let e,l="Replies",t,n,f,u=le(i[0].replies),o=[];for(let s=0;s<u.length;s+=1)o[s]=ve(de(i,u,s));const r=s=>v(o[s],1,1,()=>{o[s]=null});return{c(){e=H("h2"),e.textContent=l,t=P(),n=H("div");for(let s=0;s<o.length;s+=1)o[s].c();this.h()},l(s){e=O(s,"H2",{"data-svelte-h":!0}),X(e)!=="svelte-t4eeym"&&(e.textContent=l),t=V(s),n=O(s,"DIV",{class:!0});var c=q(n);for(let a=0;a<o.length;a+=1)o[a].l(c);c.forEach(_),this.h()},h(){M(n,"class","replies svelte-1r8s2ye")},m(s,c){b(s,e,c),b(s,t,c),b(s,n,c);for(let a=0;a<o.length;a+=1)o[a]&&o[a].m(n,null);f=!0},p(s,c){if(c&133){u=le(s[0].replies);let a;for(a=0;a<u.length;a+=1){const $=de(s,u,a);o[a]?(o[a].p($,c),m(o[a],1)):(o[a]=ve($),o[a].c(),m(o[a],1),o[a].m(n,null))}for(z(),a=u.length;a<o.length;a+=1)r(a);F()}},i(s){if(!f){for(let c=0;c<u.length;c+=1)m(o[c]);f=!0}},o(s){o=o.filter(Boolean);for(let c=0;c<o.length;c+=1)v(o[c]);f=!1},d(s){s&&(_(e),_(t),_(n)),ke(o,s)}}}function Ze(i){let e,l;return e=new ie({props:{fill:!0,$$slots:{default:[Ye]},$$scope:{ctx:i}}}),{c(){I(e.$$.fragment)},l(t){S(e.$$.fragment,t)},m(t,n){N(e,t,n),l=!0},p(t,n){const f={};n&524293&&(f.$$scope={dirty:n,ctx:t}),e.$set(f)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){v(e.$$.fragment,t),l=!1},d(t){B(e,t)}}}function xe(i){let e;return{c(){e=j("Reply")},l(l){e=J(l,"Reply")},m(l,t){b(l,e,t)},d(l){l&&_(e)}}}function et(i){let e,l,t,n,f,u;function o(s){i[12](s)}let r={class:"mb-2",type:"textarea",placeholder:"Add a reply..."};return i[1]!==void 0&&(r.value=i[1]),l=new te({props:r}),Z.push(()=>ee(l,"value",o)),f=new Q({props:{$$slots:{default:[xe]},$$scope:{ctx:i}}}),f.$on("click",i[13]),{c(){e=H("div"),I(l.$$.fragment),n=P(),I(f.$$.fragment),this.h()},l(s){e=O(s,"DIV",{class:!0});var c=q(e);S(l.$$.fragment,c),n=V(c),S(f.$$.fragment,c),c.forEach(_),this.h()},h(){M(e,"class","add-reply svelte-1r8s2ye")},m(s,c){b(s,e,c),N(l,e,null),U(e,n),N(f,e,null),u=!0},p(s,c){const a={};!t&&c&2&&(t=!0,a.value=s[1],x(()=>t=!1)),l.$set(a);const $={};c&524288&&($.$$scope={dirty:c,ctx:s}),f.$set($)},i(s){u||(m(l.$$.fragment,s),m(f.$$.fragment,s),u=!0)},o(s){v(l.$$.fragment,s),v(f.$$.fragment,s),u=!1},d(s){s&&_(e),B(l),B(f)}}}function tt(i){let e,l;return e=new se({props:{$$slots:{default:[et]},$$scope:{ctx:i}}}),{c(){I(e.$$.fragment)},l(t){S(e.$$.fragment,t)},m(t,n){N(e,t,n),l=!0},p(t,n){const f={};n&524290&&(f.$$scope={dirty:n,ctx:t}),e.$set(f)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){v(e.$$.fragment,t),l=!1},d(t){B(e,t)}}}function lt(i){let e,l;return e=new ie({props:{fill:!0,$$slots:{default:[tt]},$$scope:{ctx:i}}}),{c(){I(e.$$.fragment)},l(t){S(e.$$.fragment,t)},m(t,n){N(e,t,n),l=!0},p(t,n){const f={};n&524290&&(f.$$scope={dirty:n,ctx:t}),e.$set(f)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){v(e.$$.fragment,t),l=!1},d(t){B(e,t)}}}function nt(i){let e,l,t,n;const f=[Me,Le],u=[];function o(r,s){return r[0]?0:1}return l=o(i),t=u[l]=f[l](i),{c(){e=H("div"),t.c()},l(r){e=O(r,"DIV",{});var s=q(e);t.l(s),s.forEach(_)},m(r,s){b(r,e,s),u[l].m(e,null),n=!0},p(r,[s]){let c=l;l=o(r),l===c?u[l].p(r,s):(z(),v(u[c],1,1,()=>{u[c]=null}),F(),t=u[l],t?t.p(r,s):(t=u[l]=f[l](r),t.c()),m(t,1),t.m(e,null))},i(r){n||(m(t),n=!0)},o(r){v(t),n=!1},d(r){r&&_(e),u[l].d()}}}function rt(i,e,l){let t;De(i,Se,R=>l(14,t=R));let n=null,f="",u=null,o=!1,r="",s="";Ie(async()=>{const R=t.params.id;console.log(t.params.id),l(0,n=await Ne(R)),console.log(n);const A=localStorage.getItem("user");A&&l(2,u=JSON.parse(A))});async function c(R=null){if(f.trim()!==""){const A={id:Date.now().toString(),content:f,author:u?u.displayName:"Anonymous",createdAt:new Date().toISOString(),replies:[]};await Be(t.params.id,A,R),R?a(R,A):l(0,n.replies=[...n.replies,A],n),l(1,f="")}}function a(R,A){function T(y){for(let g=0;g<y.length;g++){if(y[g].id===R){y[g]={...y[g],...A};return}y[g].replies&&T(y[g].replies)}}T(n.replies),l(0,n={...n})}function $(R){const{replyId:A,updatedReply:T}=R.detail;a(A,T)}function p(){l(3,o=!0),l(4,r=n.title),l(5,s=n.description)}async function C(){await Ae(t.params.id,{title:r,description:s,edited:!0}),l(0,n.title=r,n),l(0,n.description=s,n),l(0,n.edited=!0,n),l(3,o=!1)}function d(R){r=R,l(4,r)}function w(R){s=R,l(5,s)}function k(R){f=R,l(1,f)}return[n,f,u,o,r,s,c,$,p,C,d,w,k,()=>c()]}class _t extends we{constructor(e){super(),ye(this,e,rt,nt,be,{})}}export{_t as component};
