import{s as He,l as pe,i as v,f as _,e as m,c as g,m as K,n as x,u as ue,a as q,g as E,b as U,r as j,h,v as fe,o as Oe,t as se,d as ae,j as we,p as Ue,M as ke}from"../chunks/scheduler.Cwazaqfz.js";import{h as ze,u as Ge}from"../chunks/await_block.BHOq8cZi.js";import{e as _e}from"../chunks/each.D6YF6ztN.js";import{S as Je,i as Ke,t as k,a as D,c as A,b as N,m as O,d as V,f as ce,g as Qe,e as We}from"../chunks/index.D0VKxQGj.js";import{g as Xe}from"../chunks/entry.Ci96r61m.js";import{B as Be}from"../chunks/Hero.svelte_svelte_type_style_lang.BqHQ8Oh_.js";import{B as Ye}from"../chunks/Badge.CRoZVWXB.js";import{I as Ce}from"../chunks/Input.Xqs69k3Z.js";import{S as Ze}from"../chunks/Select.Dgd6-uJh.js";import{C as xe}from"../chunks/Card._3FSYCGU.js";import{R as et,C as tt}from"../chunks/Row.CaZR2ylp.js";import{b as lt}from"../chunks/discussionsApi.CMBYx0O2.js";import{a as nt}from"../chunks/authStore.D2BarfCy.js";import{d as st,e as at}from"../chunks/tagsApi.Drm_6kqI.js";function Pe(a,e,l){const t=a.slice();return t[18]=e[l],t[20]=l,t}function Se(a,e,l){const t=a.slice();return t[21]=e[l],t}function ot(a){let e,l="Error loading data. Please try again later.";return{c(){e=m("p"),e.textContent=l},l(t){e=g(t,"P",{"data-svelte-h":!0}),K(e)!=="svelte-10lhexh"&&(e.textContent=l)},m(t,n){v(t,e,n)},p:x,i:x,o:x,d(t){t&&_(e)}}}function rt(a){let e,l;return e=new et({props:{$$slots:{default:[dt]},$$scope:{ctx:a}}}),{c(){A(e.$$.fragment)},l(t){N(e.$$.fragment,t)},m(t,n){O(e,t,n),l=!0},p(t,n){const o={};n&16777343&&(o.$$scope={dirty:n,ctx:t}),e.$set(o)},i(t){l||(k(e.$$.fragment,t),l=!0)},o(t){D(e.$$.fragment,t),l=!1},d(t){V(e,t)}}}function Le(a){let e,l;return{c(){e=m("p"),l=se(a[6]),this.h()},l(t){e=g(t,"P",{class:!0});var n=U(e);l=ae(n,a[6]),n.forEach(_),this.h()},h(){j(e,"class","error svelte-jvhf2q")},m(t,n){v(t,e,n),h(e,l)},p(t,n){n&64&&we(l,t[6])},d(t){t&&_(e)}}}function Ae(a){let e,l=a[21]+"",t,n;return{c(){e=m("option"),t=se(l),this.h()},l(o){e=g(o,"OPTION",{});var i=U(e);t=ae(i,l),i.forEach(_),this.h()},h(){e.__value=n=a[21],ke(e,e.__value)},m(o,i){v(o,e,i),h(e,t)},p(o,i){i&32&&l!==(l=o[21]+"")&&we(t,l),i&32&&n!==(n=o[21])&&(e.__value=n,ke(e,e.__value))},d(o){o&&_(e)}}}function it(a){let e,l="Select Category",t,n,o=_e(a[5]),i=[];for(let r=0;r<o.length;r+=1)i[r]=Ae(Se(a,o,r));return{c(){e=m("option"),e.textContent=l,t=q();for(let r=0;r<i.length;r+=1)i[r].c();n=pe(),this.h()},l(r){e=g(r,"OPTION",{"data-svelte-h":!0}),K(e)!=="svelte-15aoo8g"&&(e.textContent=l),t=E(r);for(let f=0;f<i.length;f+=1)i[f].l(r);n=pe(),this.h()},h(){e.__value="",ke(e,e.__value)},m(r,f){v(r,e,f),v(r,t,f);for(let c=0;c<i.length;c+=1)i[c]&&i[c].m(r,f);v(r,n,f)},p(r,f){if(f&32){o=_e(r[5]);let c;for(c=0;c<o.length;c+=1){const C=Se(r,o,c);i[c]?i[c].p(C,f):(i[c]=Ae(C),i[c].c(),i[c].m(n.parentNode,n))}for(;c<i.length;c+=1)i[c].d(1);i.length=o.length}},d(r){r&&(_(e),_(t),_(n)),Oe(i,r)}}}function ut(a){let e=a[18]+"",l;return{c(){l=se(e)},l(t){l=ae(t,e)},m(t,n){v(t,l,n)},p(t,n){n&4&&e!==(e=t[18]+"")&&we(l,e)},d(t){t&&_(l)}}}function Ne(a){let e,l,t,n,o;l=new Ye({props:{type:"success",$$slots:{default:[ut]},$$scope:{ctx:a}}});function i(){return a[14](a[20])}return{c(){e=m("span"),A(l.$$.fragment),this.h()},l(r){e=g(r,"SPAN",{class:!0});var f=U(e);N(l.$$.fragment,f),f.forEach(_),this.h()},h(){j(e,"class","tag-wrapper svelte-jvhf2q")},m(r,f){v(r,e,f),O(l,e,null),t=!0,n||(o=Ue(e,"click",i),n=!0)},p(r,f){a=r;const c={};f&16777220&&(c.$$scope={dirty:f,ctx:a}),l.$set(c)},i(r){t||(k(l.$$.fragment,r),t=!0)},o(r){D(l.$$.fragment,r),t=!1},d(r){r&&_(e),V(l),n=!1,o()}}}function ft(a){let e;return{c(){e=se("Add Tag")},l(l){e=ae(l,"Add Tag")},m(l,t){v(l,e,t)},d(l){l&&_(e)}}}function ct(a){let e;return{c(){e=se("Create Discussion")},l(l){e=ae(l,"Create Discussion")},m(l,t){v(l,e,t)},d(l){l&&_(e)}}}function pt(a){let e,l="Create Discussion",t,n,o,i,r,f="Title:",c,C,ee,Y,B,P,oe="Description:",te,T,le,ne,p,w,y="Category:",de,R,he,me,z,Q,qe="Tags:",ge,S,re,F,$e,ve,M,be,H,ie,$=a[6]&&Le(a);function Ve(s){a[11](s)}let Ee={type:"text",id:"title",block:!0,required:!0};a[0]!==void 0&&(Ee.value=a[0]),C=new Ce({props:Ee}),ue.push(()=>ce(C,"value",Ve));function ye(s){a[12](s)}let je={type:"textarea",id:"description",required:!0,block:!0};a[1]!==void 0&&(je.value=a[1]),T=new Ce({props:je}),ue.push(()=>ce(T,"value",ye));function Re(s){a[13](s)}let De={id:"category",block:!0,required:!0,$$slots:{default:[it]},$$scope:{ctx:a}};a[4]!==void 0&&(De.value=a[4]),R=new Ze({props:De}),ue.push(()=>ce(R,"value",Re));let W=_e(a[2]),d=[];for(let s=0;s<W.length;s+=1)d[s]=Ne(Pe(a,W,s));const Fe=s=>D(d[s],1,1,()=>{d[s]=null});function Me(s){a[15](s)}let Ie={type:"text",placeholder:"Enter a tag",disabled:a[2].length>=5};return a[3]!==void 0&&(Ie.value=a[3]),F=new Ce({props:Ie}),ue.push(()=>ce(F,"value",Me)),M=new Be({props:{disabled:!a[3]||a[2].length>=5,$$slots:{default:[ft]},$$scope:{ctx:a}}}),M.$on("click",a[7]),H=new Be({props:{$$slots:{default:[ct]},$$scope:{ctx:a}}}),H.$on("click",a[9]),{c(){e=m("h2"),e.textContent=l,t=q(),$&&$.c(),n=q(),o=m("form"),i=m("div"),r=m("label"),r.textContent=f,c=q(),A(C.$$.fragment),Y=q(),B=m("div"),P=m("label"),P.textContent=oe,te=q(),A(T.$$.fragment),ne=q(),p=m("div"),w=m("label"),w.textContent=y,de=q(),A(R.$$.fragment),me=q(),z=m("div"),Q=m("label"),Q.textContent=qe,ge=q(),S=m("div");for(let s=0;s<d.length;s+=1)d[s].c();re=q(),A(F.$$.fragment),ve=q(),A(M.$$.fragment),be=q(),A(H.$$.fragment),this.h()},l(s){e=g(s,"H2",{"data-svelte-h":!0}),K(e)!=="svelte-4oyg7e"&&(e.textContent=l),t=E(s),$&&$.l(s),n=E(s),o=g(s,"FORM",{});var u=U(o);i=g(u,"DIV",{class:!0});var I=U(i);r=g(I,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),K(r)!=="svelte-kpfkpc"&&(r.textContent=f),c=E(I),N(C.$$.fragment,I),I.forEach(_),Y=E(u),B=g(u,"DIV",{class:!0});var X=U(B);P=g(X,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),K(P)!=="svelte-1jjlhqk"&&(P.textContent=oe),te=E(X),N(T.$$.fragment,X),X.forEach(_),ne=E(u),p=g(u,"DIV",{class:!0});var G=U(p);w=g(G,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),K(w)!=="svelte-1qmhjiw"&&(w.textContent=y),de=E(G),N(R.$$.fragment,G),G.forEach(_),me=E(u),z=g(u,"DIV",{class:!0});var J=U(z);Q=g(J,"LABEL",{class:!0,"data-svelte-h":!0}),K(Q)!=="svelte-1uka2cl"&&(Q.textContent=qe),ge=E(J),S=g(J,"DIV",{});var L=U(S);for(let Z=0;Z<d.length;Z+=1)d[Z].l(L);re=E(L),N(F.$$.fragment,L),ve=E(L),N(M.$$.fragment,L),L.forEach(_),J.forEach(_),be=E(u),N(H.$$.fragment,u),u.forEach(_),this.h()},h(){j(r,"for","title"),j(r,"class","svelte-jvhf2q"),j(i,"class","form-group svelte-jvhf2q"),j(P,"for","description"),j(P,"class","svelte-jvhf2q"),j(B,"class","form-group svelte-jvhf2q"),j(w,"for","category"),j(w,"class","svelte-jvhf2q"),j(p,"class","form-group svelte-jvhf2q"),j(Q,"class","svelte-jvhf2q"),j(z,"class","form-group svelte-jvhf2q")},m(s,u){v(s,e,u),v(s,t,u),$&&$.m(s,u),v(s,n,u),v(s,o,u),h(o,i),h(i,r),h(i,c),O(C,i,null),h(o,Y),h(o,B),h(B,P),h(B,te),O(T,B,null),h(o,ne),h(o,p),h(p,w),h(p,de),O(R,p,null),h(o,me),h(o,z),h(z,Q),h(z,ge),h(z,S);for(let I=0;I<d.length;I+=1)d[I]&&d[I].m(S,null);h(S,re),O(F,S,null),h(S,ve),O(M,S,null),h(o,be),O(H,o,null),ie=!0},p(s,u){s[6]?$?$.p(s,u):($=Le(s),$.c(),$.m(n.parentNode,n)):$&&($.d(1),$=null);const I={};!ee&&u&1&&(ee=!0,I.value=s[0],fe(()=>ee=!1)),C.$set(I);const X={};!le&&u&2&&(le=!0,X.value=s[1],fe(()=>le=!1)),T.$set(X);const G={};if(u&16777248&&(G.$$scope={dirty:u,ctx:s}),!he&&u&16&&(he=!0,G.value=s[4],fe(()=>he=!1)),R.$set(G),u&260){W=_e(s[2]);let b;for(b=0;b<W.length;b+=1){const Te=Pe(s,W,b);d[b]?(d[b].p(Te,u),k(d[b],1)):(d[b]=Ne(Te),d[b].c(),k(d[b],1),d[b].m(S,re))}for(Qe(),b=W.length;b<d.length;b+=1)Fe(b);We()}const J={};u&4&&(J.disabled=s[2].length>=5),!$e&&u&8&&($e=!0,J.value=s[3],fe(()=>$e=!1)),F.$set(J);const L={};u&12&&(L.disabled=!s[3]||s[2].length>=5),u&16777216&&(L.$$scope={dirty:u,ctx:s}),M.$set(L);const Z={};u&16777216&&(Z.$$scope={dirty:u,ctx:s}),H.$set(Z)},i(s){if(!ie){k(C.$$.fragment,s),k(T.$$.fragment,s),k(R.$$.fragment,s);for(let u=0;u<W.length;u+=1)k(d[u]);k(F.$$.fragment,s),k(M.$$.fragment,s),k(H.$$.fragment,s),ie=!0}},o(s){D(C.$$.fragment,s),D(T.$$.fragment,s),D(R.$$.fragment,s),d=d.filter(Boolean);for(let u=0;u<d.length;u+=1)D(d[u]);D(F.$$.fragment,s),D(M.$$.fragment,s),D(H.$$.fragment,s),ie=!1},d(s){s&&(_(e),_(t),_(n),_(o)),$&&$.d(s),V(C),V(T),V(R),Oe(d,s),V(F),V(M),V(H)}}}function _t(a){let e,l;return e=new xe({props:{$$slots:{default:[pt]},$$scope:{ctx:a}}}),{c(){A(e.$$.fragment)},l(t){N(e.$$.fragment,t)},m(t,n){O(e,t,n),l=!0},p(t,n){const o={};n&16777343&&(o.$$scope={dirty:n,ctx:t}),e.$set(o)},i(t){l||(k(e.$$.fragment,t),l=!0)},o(t){D(e.$$.fragment,t),l=!1},d(t){V(e,t)}}}function dt(a){let e,l;return e=new tt({props:{fill:!0,$$slots:{default:[_t]},$$scope:{ctx:a}}}),{c(){A(e.$$.fragment)},l(t){N(e.$$.fragment,t)},m(t,n){O(e,t,n),l=!0},p(t,n){const o={};n&16777343&&(o.$$scope={dirty:n,ctx:t}),e.$set(o)},i(t){l||(k(e.$$.fragment,t),l=!0)},o(t){D(e.$$.fragment,t),l=!1},d(t){V(e,t)}}}function ht(a){let e,l="Loading data...";return{c(){e=m("p"),e.textContent=l},l(t){e=g(t,"P",{"data-svelte-h":!0}),K(e)!=="svelte-slw5li"&&(e.textContent=l)},m(t,n){v(t,e,n)},p:x,i:x,o:x,d(t){t&&_(e)}}}function mt(a){let e,l,t={ctx:a,current:null,token:null,hasCatch:!0,pending:ht,then:rt,catch:ot,error:6,blocks:[,,,]};return ze(a[10],t),{c(){e=pe(),t.block.c()},l(n){e=pe(),t.block.l(n)},m(n,o){v(n,e,o),t.block.m(n,t.anchor=o),t.mount=()=>e.parentNode,t.anchor=e,l=!0},p(n,[o]){a=n,Ge(t,a,o)},i(n){l||(k(t.block),l=!0)},o(n){for(let o=0;o<3;o+=1){const i=t.blocks[o];D(i)}l=!1},d(n){n&&_(e),t.block.d(n),t.token=null,t=null}}}function gt(a,e,l){let t="",n="",o=[],i="",r="",f=null,c=[];async function C(){const[p,w]=await Promise.all([st(),at()]);p.map(y=>y.name),l(5,c=w.map(y=>y.name))}function ee(){i&&!o.includes(i)&&o.length<5&&(l(2,o=[...o,i]),l(3,i=""))}function Y(p){l(2,o=o.filter((w,y)=>y!==p))}async function B(){if(!t||!n||!r){l(6,f="Please fill in all fields");return}try{const p=nt.getCurrentUser(),w={title:t,description:n,tags:o,category:r,startedBy:p.displayName,dateTime:new Date().toISOString(),replies:0};await lt(w)?Xe("/discussions"):l(6,f="Failed to create discussion")}catch{l(6,f="An error occurred while creating the discussion")}}let P=C();function oe(p){t=p,l(0,t)}function te(p){n=p,l(1,n)}function T(p){r=p,l(4,r)}const le=p=>Y(p);function ne(p){i=p,l(3,i)}return[t,n,o,i,r,c,f,ee,Y,B,P,oe,te,T,le,ne]}class St extends Je{constructor(e){super(),Ke(this,e,gt,mt,He,{})}}export{St as component};
